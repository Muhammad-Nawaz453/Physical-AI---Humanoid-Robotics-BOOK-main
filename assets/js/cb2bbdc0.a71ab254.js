"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[5331],{7197:(e,r,n)=>{n.d(r,{A:()=>t});var s=n(6540),i=n(4848);function t({chapterContent:e,userBackground:r}){const[n,t]=(0,s.useState)(e),[o,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1);return(0,i.jsxs)("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem",border:"2px solid #e0e0e0"},children:[(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",marginBottom:"1.5rem"},children:[(0,i.jsxs)("button",{onClick:()=>{u(!0),setTimeout(()=>{const n=r?.experienceLevel||"beginner",s=r?.softwareBackground||"",i=r?.hardwareBackground||"";let o=e;"beginner"===n?o=`\n## \ud83c\udf31 Beginner-Friendly Version\n\n*This content has been tailored for beginners. Take your time and practice each concept!*\n\n---\n\n${e}\n\n---\n\n### \ud83d\udca1 Tips for Beginners:\n- Don't rush through the material\n- Try coding examples yourself\n- Use Google when stuck\n- Join robotics communities for help\n        `:"intermediate"===n?o=`\n## \ud83d\udcc8 Intermediate Track\n\n*You have some experience - this version includes additional challenges!*\n\n---\n\n${e}\n\n---\n\n### \ud83c\udfaf Challenge Yourself:\n- Implement optimizations\n- Try different approaches\n- Build your own variations\n- Share your projects with others\n        `:"advanced"===n&&(o=`\n## \ud83d\ude80 Advanced Deep Dive\n\n*Expert content with cutting-edge concepts and research directions.*\n\n---\n\n${e}\n\n---\n\n### \u26a1 Advanced Topics:\n- Latest research papers\n- Performance optimization techniques\n- Edge cases and error handling\n- Contributing to open source projects\n        `),s.toLowerCase().includes("python")&&(o+="\n\n### \ud83d\udc0d Python Developer Tip:\nYou can leverage your Python skills here! Most robotics frameworks have excellent Python bindings."),(i.toLowerCase().includes("arduino")||i.toLowerCase().includes("raspberry"))&&(o+="\n\n### \ud83d\udd27 Hardware Experience Bonus:\nYour hardware background gives you an advantage! You already understand embedded systems."),t(o),a(!0),u(!1)},500)},disabled:d||o,style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:o?"#28a745":"#9b59b6",color:"white",padding:"0.75rem 1.25rem",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:"600",cursor:d||o?"not-allowed":"pointer",opacity:d||o?.6:1,transition:"all 0.3s"},onMouseOver:e=>{d||o||(e.target.style.transform="scale(1.05)")},onMouseOut:e=>{e.target.style.transform="scale(1)"},children:[(0,i.jsx)("span",{children:"\u2728"}),o?"Personalized \u2713":"Personalize Content"]}),(0,i.jsxs)("button",{onClick:()=>{u(!0),setTimeout(()=>{let r=e;Object.entries({Robot:"\u0631\u0648\u0628\u0648\u0679 (Robot)",robot:"\u0631\u0648\u0628\u0648\u0679 (robot)",Sensor:"\u0633\u06cc\u0646\u0633\u0631 (Sensor)",sensor:"\u0633\u06cc\u0646\u0633\u0631 (sensor)",Control:"\u06a9\u0646\u0679\u0631\u0648\u0644 (Control)",control:"\u06a9\u0646\u0679\u0631\u0648\u0644 (control)",Simulation:"\u0646\u0642\u0627\u0644\u06cc (Simulation)",simulation:"\u0646\u0642\u0627\u0644\u06cc (simulation)","Artificial Intelligence":"\u0645\u0635\u0646\u0648\u0639\u06cc \u0630\u06c1\u0627\u0646\u062a (AI)","artificial intelligence":"\u0645\u0635\u0646\u0648\u0639\u06cc \u0630\u06c1\u0627\u0646\u062a (AI)",AI:"\u0627\u06d2 \u0622\u0626\u06cc (AI)","Physical AI":"\u0641\u0632\u06cc\u06a9\u0644 \u0627\u06d2 \u0622\u0626\u06cc (Physical AI)",Humanoid:"\u0627\u0646\u0633\u0627\u0646 \u0646\u0645\u0627 (Humanoid)",humanoid:"\u0627\u0646\u0633\u0627\u0646 \u0646\u0645\u0627 (humanoid)",Introduction:"\u062a\u0639\u0627\u0631\u0641 (Introduction)",Module:"\u0645\u0627\u0688\u06cc\u0648\u0644 (Module)",module:"\u0645\u0627\u0688\u06cc\u0648\u0644 (module)",Chapter:"\u0628\u0627\u0628 (Chapter)",chapter:"\u0628\u0627\u0628 (chapter)",Learning:"\u0633\u06cc\u06a9\u06be\u0646\u0627 (Learning)",learning:"\u0633\u06cc\u06a9\u06be\u0646\u0627 (learning)",Programming:"\u067e\u0631\u0648\u06af\u0631\u0627\u0645\u0646\u06af (Programming)",programming:"\u067e\u0631\u0648\u06af\u0631\u0627\u0645\u0646\u06af (programming)",Code:"\u06a9\u0648\u0688 (Code)",code:"\u06a9\u0648\u0688 (code)",System:"\u0646\u0638\u0627\u0645 (System)",system:"\u0646\u0638\u0627\u0645 (system)",Data:"\u0688\u06cc\u0679\u0627 (Data)",data:"\u0688\u06cc\u0679\u0627 (data)",Algorithm:"\u0627\u0644\u06af\u0648\u0631\u062a\u06be\u0645 (Algorithm)",algorithm:"\u0627\u0644\u06af\u0648\u0631\u062a\u06be\u0645 (algorithm)",Model:"\u0645\u0627\u0688\u0644 (Model)",model:"\u0645\u0627\u0688\u0644 (model)",Training:"\u062a\u0631\u0628\u06cc\u062a (Training)",training:"\u062a\u0631\u0628\u06cc\u062a (training)","Neural Network":"\u0639\u0635\u0628\u06cc \u0646\u06cc\u0679 \u0648\u0631\u06a9 (Neural Network)","Computer Vision":"\u06a9\u0645\u067e\u06cc\u0648\u0679\u0631 \u0648\u0698\u0646 (Computer Vision)","Machine Learning":"\u0645\u0634\u06cc\u0646 \u0644\u0631\u0646\u0646\u06af (Machine Learning)"}).forEach(([e,n])=>{const s=new RegExp(`\\b${e}\\b`,"g");r=r.replace(s,n)}),r=`\n# \ud83c\uddf5\ud83c\uddf0 \u0627\u0631\u062f\u0648 \u062a\u0631\u062c\u0645\u06c1 / Urdu Translation\n\n*\u0646\u0648\u0679: \u06cc\u06c1 \u062e\u0648\u062f\u06a9\u0627\u0631 \u062a\u0631\u062c\u0645\u06c1 \u06c1\u06d2\u06d4 \u062a\u06a9\u0646\u06cc\u06a9\u06cc \u0627\u0635\u0637\u0644\u0627\u062d\u0627\u062a \u0627\u0646\u06af\u0631\u06cc\u0632\u06cc \u0645\u06cc\u06ba \u0628\u06be\u06cc \u0634\u0627\u0645\u0644 \u06c1\u06cc\u06ba\u06d4*\n\n*Note: This is an automatic translation. Technical terms are included in English for clarity.*\n\n---\n\n${r}\n\n---\n\n### \u0627\u0636\u0627\u0641\u06cc \u0645\u0639\u0644\u0648\u0645\u0627\u062a / Additional Info:\n- \u062a\u06a9\u0646\u06cc\u06a9\u06cc \u0627\u0644\u0641\u0627\u0638 \u062f\u0648\u0646\u0648\u06ba \u0632\u0628\u0627\u0646\u0648\u06ba \u0645\u06cc\u06ba \u062f\u06cc\u06d2 \u06af\u0626\u06d2 \u06c1\u06cc\u06ba\n- Technical terms are provided in both languages\n- \u0645\u0632\u06cc\u062f \u0633\u0648\u0627\u0644\u0627\u062a \u06a9\u06d2 \u0644\u06cc\u06d2 \u0627\u0633\u062a\u0627\u062f \u0633\u06d2 \u0631\u0627\u0628\u0637\u06c1 \u06a9\u0631\u06cc\u06ba\n- Contact your instructor for more questions\n      `,t(r),c(!0),u(!1)},500)},disabled:d||l,style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:l?"#28a745":"#27ae60",color:"white",padding:"0.75rem 1.25rem",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:"600",cursor:d||l?"not-allowed":"pointer",opacity:d||l?.6:1,transition:"all 0.3s"},onMouseOver:e=>{d||l||(e.target.style.transform="scale(1.05)")},onMouseOut:e=>{e.target.style.transform="scale(1)"},children:[(0,i.jsx)("span",{children:"\ud83c\uddf5\ud83c\uddf0"}),l?"\u0627\u0631\u062f\u0648 \u0645\u06cc\u06ba \u2713":"Translate to Urdu"]}),(o||l)&&(0,i.jsxs)("button",{onClick:()=>{t(e),a(!1),c(!1)},style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#6c757d",color:"white",padding:"0.75rem 1.25rem",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s"},onMouseOver:e=>{e.target.style.transform="scale(1.05)"},onMouseOut:e=>{e.target.style.transform="scale(1)"},children:[(0,i.jsx)("span",{children:"\u21ba"}),"Reset to Original"]})]}),(0,i.jsx)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"1.5rem",border:"1px solid #dee2e6",minHeight:"200px"},children:d?(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"3rem"},children:(0,i.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):(0,i.jsx)("div",{style:{whiteSpace:"pre-wrap",lineHeight:"1.6",color:"#333"},children:n})}),!d&&(0,i.jsxs)("div",{style:{marginTop:"1rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[o&&(0,i.jsxs)("span",{style:{backgroundColor:"#e7d4f7",color:"#6f42c1",padding:"0.4rem 0.8rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600"},children:["\ud83c\udfaf Tailored to ",r?.experienceLevel||"your"," level"]}),l&&(0,i.jsx)("span",{style:{backgroundColor:"#d4edda",color:"#155724",padding:"0.4rem 0.8rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600"},children:"\ud83c\uddf5\ud83c\uddf0 \u0627\u0631\u062f\u0648 Translation Active"})]}),(0,i.jsx)("style",{children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>a});var s=n(6540);const i={},t=s.createContext(i);function o(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:r},e.children)}},9283:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"module-1/nodes-and-topics","title":"Nodes and Topics - The ROS 2 Communication Foundation","description":"<ChapterControls","source":"@site/docs/module-1/nodes-and-topics.mdx","sourceDirName":"module-1","slug":"/module-1/nodes-and-topics","permalink":"/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/nodes-and-topics","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics/tree/main/docs/module-1/nodes-and-topics.mdx","tags":[],"version":"current","frontMatter":{"title":"Nodes and Topics - The ROS 2 Communication Foundation"},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Architecture: The Blueprint of a Robotic Mind \ud83c\udfd7\ufe0f\ud83c\udf10","permalink":"/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture"},"next":{"title":"\u26a1 Services and Actions - Synchronous Communication in ROS 2","permalink":"/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/services-and-actions"}}');var i=n(4848),t=n(8453),o=n(7197);const a={title:"Nodes and Topics - The ROS 2 Communication Foundation"},l=void 0,c={},d=[{value:"sidebar_position: 3",id:"sidebar_position-3",level:2},{value:"\ud83c\udfaf Learning Objectives",id:"-learning-objectives",level:2},{value:"\ud83c\udf10 Understanding Nodes and Topics",id:"-understanding-nodes-and-topics",level:2},{value:"The Publisher-Subscriber Pattern",id:"the-publisher-subscriber-pattern",level:3},{value:"\ud83d\udee0\ufe0f Creating Your First Publisher Node",id:"\ufe0f-creating-your-first-publisher-node",level:2},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:3},{value:"\ud83d\udcec Creating Your First Subscriber Node",id:"-creating-your-first-subscriber-node",level:2},{value:"\ud83e\uddf1 Designing Custom Message Types",id:"-designing-custom-message-types",level:2},{value:"Creating a Complete Package Structure",id:"creating-a-complete-package-structure",level:3},{value:"\ud83d\udd27 Advanced Publisher-Subscriber Patterns",id:"-advanced-publisher-subscriber-patterns",level:2},{value:"Multiple Publishers and Subscribers",id:"multiple-publishers-and-subscribers",level:3},{value:"Latching Topics",id:"latching-topics",level:3},{value:"\ud83e\uddea Hands-On Exercise: Temperature Monitoring System",id:"-hands-on-exercise-temperature-monitoring-system",level:2},{value:"\ud83d\udca1 Key Takeaways",id:"-key-takeaways",level:2},{value:"\ud83d\udcda Further Reading",id:"-further-reading",level:2}];function u(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A,{chapterContent:"\n  # Your chapter content here\n  \n  This is the text that will be personalized and translated.\n",userBackground:"undefined"!=typeof window?JSON.parse(localStorage.getItem("user")||"{}"):{}}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"sidebar_position-3",children:"sidebar_position: 3"}),"\n",(0,i.jsx)(r.h1,{id:"-nodes-and-topics---the-ros-2-communication-foundation",children:"\ud83e\udd16 Nodes and Topics - The ROS 2 Communication Foundation"}),"\n",(0,i.jsx)(r.p,{children:"In ROS 2, nodes and topics form the backbone of robotic communication. Nodes are the fundamental computational units that perform specific tasks, while topics enable asynchronous, decoupled communication between them. Understanding this publish-subscribe pattern is crucial for building robust robotic systems that can scale from simple single-robot applications to complex multi-robot coordination systems."}),"\n",(0,i.jsx)(r.h2,{id:"-learning-objectives",children:"\ud83c\udfaf Learning Objectives"}),"\n",(0,i.jsx)(r.p,{children:"By the end of this chapter, you will:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Understand the fundamental concepts of ROS 2 nodes and topics"}),"\n",(0,i.jsx)(r.li,{children:"Create publisher and subscriber nodes using Python and rclpy"}),"\n",(0,i.jsx)(r.li,{children:"Design custom message types for your robotic applications"}),"\n",(0,i.jsx)(r.li,{children:"Implement Quality of Service (QoS) policies for reliable communication"}),"\n",(0,i.jsx)(r.li,{children:"Build a complete node-to-node communication system"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-understanding-nodes-and-topics",children:"\ud83c\udf10 Understanding Nodes and Topics"}),"\n",(0,i.jsx)(r.p,{children:"ROS 2 nodes are independent processes that perform specific computational tasks. Think of them as microservices in a distributed system - each node has a specific responsibility and communicates with other nodes through standardized interfaces called topics, services, and actions."}),"\n",(0,i.jsxs)(r.p,{children:["A ",(0,i.jsx)(r.strong,{children:"topic"})," is a named channel that allows nodes to publish data to and subscribe from. This publish-subscribe pattern creates loose coupling between nodes: publishers don't need to know who's listening, and subscribers don't need to know who's sending data. This architecture makes ROS 2 systems highly modular and scalable."]}),"\n",(0,i.jsx)(r.admonition,{title:"Pro Tip",type:"tip",children:(0,i.jsx)(r.p,{children:"Nodes can be both publishers and subscribers simultaneously, allowing them to act as communication bridges between different parts of your robotic system."})}),"\n",(0,i.jsx)(r.h3,{id:"the-publisher-subscriber-pattern",children:"The Publisher-Subscriber Pattern"}),"\n",(0,i.jsx)(r.p,{children:"In the publisher-subscriber model, data flows in one direction from publishers to subscribers:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-mermaid",children:"graph LR\r\n    A[Publisher Node] --\x3e|Topic Message| C[(Topic)]\r\n    B[Publisher Node] --\x3e|Topic Message| C\r\n    C --\x3e|Topic Message| D[Subscriber Node]\r\n    C --\x3e|Topic Message| E[Subscriber Node]\r\n    C --\x3e|Topic Message| F[Subscriber Node]\n"})}),"\n",(0,i.jsx)(r.p,{children:"This pattern offers several advantages:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Decoupling"}),": Publishers and subscribers don't need to know about each other"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Scalability"}),": Multiple subscribers can listen to the same topic"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Asynchrony"}),": Publishers and subscribers can run at different rates"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Robustness"}),": Failure of one node doesn't necessarily affect others"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-creating-your-first-publisher-node",children:"\ud83d\udee0\ufe0f Creating Your First Publisher Node"}),"\n",(0,i.jsx)(r.p,{children:"Let's start by creating a simple publisher node that publishes sensor data. This will demonstrate the basic structure of a ROS 2 node using Python's rclpy library."}),"\n",(0,i.jsx)(r.p,{children:"First, create a Python file for your publisher node:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# sensor_publisher.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\nimport time\r\n\r\nclass SensorPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('sensor_publisher')\r\n\r\n        # Create a publisher with String message type\r\n        self.publisher_ = self.create_publisher(String, 'sensor_data', 10)\r\n\r\n        # Create a timer to publish data every 0.5 seconds\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n\r\n        # Counter to track published messages\r\n        self.i = 0\r\n\r\n        self.get_logger().info('Sensor Publisher Node Started')\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Sensor reading: {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    sensor_publisher = SensorPublisher()\r\n\r\n    try:\r\n        rclpy.spin(sensor_publisher)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        sensor_publisher.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.p,{children:"Let's break down the key components:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Node Inheritance"}),": Your class inherits from ",(0,i.jsx)(r.code,{children:"Node"})," to become a ROS 2 node"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Publisher Creation"}),": ",(0,i.jsx)(r.code,{children:"create_publisher()"})," creates a publisher for the topic"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Timer Callback"}),": Creates a timed callback to publish data at regular intervals"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Message Publishing"}),": The callback creates a message and publishes it to the topic"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,i.jsx)(r.p,{children:"ROS 2 provides Quality of Service (QoS) policies to control how messages are delivered. These policies determine reliability, durability, and history of message delivery:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy\r\n\r\n# Create a custom QoS profile\r\nqos_profile = QoSProfile(\r\n    depth=10,  # Keep 10 messages in history\r\n    reliability=ReliabilityPolicy.RELIABLE,  # Ensure delivery\r\n    history=HistoryPolicy.KEEP_LAST  # Keep only the last N messages\r\n)\r\n\r\n# Use the custom QoS profile\r\nself.publisher_ = self.create_publisher(String, 'sensor_data', qos_profile)\n"})}),"\n",(0,i.jsx)(r.p,{children:"Different QoS policies are useful for different scenarios:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Reliable"}),": For critical data where no messages can be lost"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Best Effort"}),": For high-frequency data where some loss is acceptable"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Keep Last"}),": For state updates where only the most recent value matters"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Keep All"}),": For logging where every message is important"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-creating-your-first-subscriber-node",children:"\ud83d\udcec Creating Your First Subscriber Node"}),"\n",(0,i.jsx)(r.p,{children:"Now let's create a subscriber node that listens to the sensor data published by our publisher:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# sensor_subscriber.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass SensorSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('sensor_subscriber')\r\n\r\n        # Create a subscription to the 'sensor_data' topic\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'sensor_data',\r\n            self.listener_callback,\r\n            10)  # QoS depth parameter\r\n\r\n        # Prevent unused variable warning\r\n        self.subscription  # type: ignore\r\n\r\n        self.get_logger().info('Sensor Subscriber Node Started')\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    sensor_subscriber = SensorSubscriber()\r\n\r\n    try:\r\n        rclpy.spin(sensor_subscriber)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        sensor_subscriber.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.p,{children:"The subscriber follows a similar pattern:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Subscription Creation"}),": ",(0,i.jsx)(r.code,{children:"create_subscription()"})," creates a subscription to a topic"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Callback Function"}),": Called whenever a message arrives on the topic"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Message Processing"}),": The callback processes the received message"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-designing-custom-message-types",children:"\ud83e\uddf1 Designing Custom Message Types"}),"\n",(0,i.jsxs)(r.p,{children:["While ",(0,i.jsx)(r.code,{children:"std_msgs"})," provides basic message types, real robotics applications often require custom data structures. Let's create a custom message type for sensor data that includes timestamp, sensor ID, and reading value."]}),"\n",(0,i.jsx)(r.p,{children:"First, create a message definition file:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-text",children:"# Create msg/SensorReading.msg\r\n# Custom sensor reading message\r\nint32 sensor_id\r\nfloat64 value\r\nbuiltin_interfaces.msg.Time timestamp\r\nstring sensor_type\n"})}),"\n",(0,i.jsx)(r.p,{children:"To use this custom message in Python:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# custom_sensor_publisher.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom builtin_interfaces.msg import Time\r\nfrom my_robot_msgs.msg import SensorReading  # Your custom message\r\nimport time\r\n\r\nclass CustomSensorPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('custom_sensor_publisher')\r\n\r\n        # Create publisher for custom message\r\n        self.publisher_ = self.create_publisher(SensorReading, 'custom_sensor_data', 10)\r\n\r\n        timer_period = 1.0\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = SensorReading()\r\n        msg.sensor_id = 1\r\n        msg.value = 42.5 + self.i\r\n        msg.sensor_type = 'temperature'\r\n\r\n        # Get current time\r\n        current_time = self.get_clock().now().to_msg()\r\n        msg.timestamp = current_time\r\n\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Published sensor {msg.sensor_id} reading: {msg.value}')\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = CustomSensorPublisher()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(r.h3,{id:"creating-a-complete-package-structure",children:"Creating a Complete Package Structure"}),"\n",(0,i.jsx)(r.p,{children:"For a complete ROS 2 package with custom messages, you'll need this directory structure:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"my_robot_package/\r\n\u251c\u2500\u2500 CMakeLists.txt\r\n\u251c\u2500\u2500 package.xml\r\n\u251c\u2500\u2500 setup.py\r\n\u251c\u2500\u2500 setup.cfg\r\n\u251c\u2500\u2500 resource/\r\n\u2502   \u2514\u2500\u2500 my_robot_package\r\n\u251c\u2500\u2500 my_robot_package/\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u2514\u2500\u2500 nodes/\r\n\u2502       \u251c\u2500\u2500 sensor_publisher.py\r\n\u2502       \u2514\u2500\u2500 sensor_subscriber.py\r\n\u251c\u2500\u2500 msg/\r\n\u2502   \u2514\u2500\u2500 SensorReading.msg\r\n\u2514\u2500\u2500 launch/\r\n    \u2514\u2500\u2500 sensor_nodes.launch.py\n"})}),"\n",(0,i.jsx)(r.h2,{id:"-advanced-publisher-subscriber-patterns",children:"\ud83d\udd27 Advanced Publisher-Subscriber Patterns"}),"\n",(0,i.jsx)(r.h3,{id:"multiple-publishers-and-subscribers",children:"Multiple Publishers and Subscribers"}),"\n",(0,i.jsx)(r.p,{children:"ROS 2 supports multiple publishers and subscribers on the same topic, enabling complex communication patterns:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# multi_publisher.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MultiPublisher(Node):\r\n    def __init__(self, publisher_id):\r\n        super().__init__(f'multi_publisher_{publisher_id}')\r\n\r\n        self.publisher_id = publisher_id\r\n        self.publisher_ = self.create_publisher(String, 'multi_topic', 10)\r\n\r\n        timer_period = 2.0\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n\r\n        self.get_logger().info(f'Multi Publisher {publisher_id} Started')\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Message from publisher {self.publisher_id}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publisher {self.publisher_id}: {msg.data}')\r\n\r\n# multi_subscriber.py\r\nclass MultiSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('multi_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'multi_topic',\r\n            self.listener_callback,\r\n            10)\r\n        self.subscription  # type: ignore\r\n        self.get_logger().info('Multi Subscriber Started')\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'Multi Subscriber received: \"{msg.data}\"')\n"})}),"\n",(0,i.jsx)(r.h3,{id:"latching-topics",children:"Latching Topics"}),"\n",(0,i.jsx)(r.p,{children:'Sometimes you want late-joining subscribers to receive the most recent message immediately. This is called "latching":'}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from rclpy.qos import QoSPresetProfiles\r\n\r\n# Publisher with latching behavior\r\nqos_profile = QoSPresetProfiles.TRANSIENT_LOCAL.value\r\nself.publisher_ = self.create_publisher(String, 'latched_topic', qos_profile)\n"})}),"\n",(0,i.jsx)(r.h2,{id:"-hands-on-exercise-temperature-monitoring-system",children:"\ud83e\uddea Hands-On Exercise: Temperature Monitoring System"}),"\n",(0,i.jsx)(r.p,{children:"Create a temperature monitoring system with the following requirements:"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Expected Time:"})," 25 minutes"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Requirements:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Temperature publisher that simulates sensor readings"}),"\n",(0,i.jsx)(r.li,{children:"Temperature subscriber that logs readings and detects anomalies"}),"\n",(0,i.jsx)(r.li,{children:"Custom message type for temperature data"}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Instructions:"})}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Create a custom message type for temperature readings with sensor ID, temperature value, and timestamp"}),"\n",(0,i.jsx)(r.li,{children:"Implement a temperature publisher that publishes simulated temperature readings (use random values around 20-30\xb0C)"}),"\n",(0,i.jsx)(r.li,{children:"Implement a temperature subscriber that logs readings and alerts when temperature exceeds 25\xb0C"}),"\n",(0,i.jsx)(r.li,{children:"Test the system by running both nodes simultaneously"}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Solution Hints:"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Use Python's ",(0,i.jsx)(r.code,{children:"random.uniform()"})," for simulating temperature readings"]}),"\n",(0,i.jsx)(r.li,{children:"Remember to import the necessary message types"}),"\n",(0,i.jsx)(r.li,{children:"Consider using QoS policies appropriate for sensor data"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-key-takeaways",children:"\ud83d\udca1 Key Takeaways"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Nodes"})," are independent processes that perform specific tasks in ROS 2"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Topics"})," enable asynchronous, decoupled communication through publish-subscribe patterns"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Quality of Service (QoS)"})," policies control message delivery characteristics"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Custom messages"})," allow you to define application-specific data structures"]}),"\n",(0,i.jsx)(r.li,{children:"The publisher-subscriber pattern promotes modularity and scalability in robotic systems"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-further-reading",children:"\ud83d\udcda Further Reading"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://docs.ros.org/en/rolling/Concepts/About-Topics.html",children:"ROS 2 Documentation - Nodes and Topics"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://docs.ros.org/en/rolling/Concepts/About-Quality-of-Service.html",children:"ROS 2 Quality of Service"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://docs.ros.org/en/rolling/Tutorials/Creating-Your-First-ROS2-Package.html",children:"Creating Custom Message Types"})}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Next Chapter:"})," ",(0,i.jsx)(r.a,{href:"/module-1/services-and-actions",children:"Services and Actions"})]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);