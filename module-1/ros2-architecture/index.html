<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module-1/ros2-architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">ROS 2 Architecture: The Blueprint of a Robotic Mind üèóÔ∏èüåê | Physical AI &amp; Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ur"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ROS 2 Architecture: The Blueprint of a Robotic Mind üèóÔ∏èüåê | Physical AI &amp; Humanoid Robotics"><meta data-rh="true" name="description" content="Welcome to the heart of ROS 2 ‚Äì its architecture! In the introduction to ROS 2, we established that ROS 2 is more than just an operating system; it&#x27;s a meta-operating system providing the nervous system for intelligent robots. Now, we&#x27;ll peel back the layers to understand the fundamental design principles and core components that enable this robust communication and coordination."><meta data-rh="true" property="og:description" content="Welcome to the heart of ROS 2 ‚Äì its architecture! In the introduction to ROS 2, we established that ROS 2 is more than just an operating system; it&#x27;s a meta-operating system providing the nervous system for intelligent robots. Now, we&#x27;ll peel back the layers to understand the fundamental design principles and core components that enable this robust communication and coordination."><link data-rh="true" rel="icon" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture"><link data-rh="true" rel="alternate" href="https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/ur/module-1/ros2-architecture" hreflang="ur"><link data-rh="true" rel="alternate" href="https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ROS 2 Architecture: The Blueprint of a Robotic Mind üèóÔ∏èüåê","item":"https://Muhammad-Nawaz453.github.io/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture"}]}</script><link rel="stylesheet" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/assets/css/styles.a97421cc.css">
<script src="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/assets/js/runtime~main.dd3afefb.js" defer="defer"></script>
<script src="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/assets/js/main.85267a18.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/"><div class="navbar__logo"><img src="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/img/logo.svg" alt="Physical AI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/img/logo.svg" alt="Physical AI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Physical AI &amp; Humanoid Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/intro">Textbook</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/ur/module-1/ros2-architecture" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ur">ÿßÿ±ÿØŸà</a></li></ul></div><a href="https://github.com/YOUR-USERNAME/physical-ai-textbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/intro"><span title="üè† Introduction" class="linkLabel_WmDU">üè† Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/getting-started/overview"><span title="üìö Getting Started" class="categoryLinkLabel_W154">üìö Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/getting-started/overview"><span title="Embarking on the Physical AI &amp; Humanoid Robotics Journey üöÄ" class="linkLabel_WmDU">Embarking on the Physical AI &amp; Humanoid Robotics Journey üöÄ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/getting-started/prerequisites"><span title="Prerequisites: Gearing Up for Your Physical AI Journey üõ†Ô∏èüß†" class="linkLabel_WmDU">Prerequisites: Gearing Up for Your Physical AI Journey üõ†Ô∏èüß†</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/getting-started/hardware-requirements"><span title="Hardware Requirements: Building Your Physical AI Powerhouse üöÄüíª" class="linkLabel_WmDU">Hardware Requirements: Building Your Physical AI Powerhouse üöÄüíª</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/getting-started/software-setup"><span title="Software Setup: Preparing Your Physical AI Workspace üõ†Ô∏èüñ•Ô∏è" class="linkLabel_WmDU">Software Setup: Preparing Your Physical AI Workspace üõ†Ô∏èüñ•Ô∏è</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/introduction"><span title="ü§ñ Module 1: ROS 2" class="categoryLinkLabel_W154">ü§ñ Module 1: ROS 2</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/introduction"><span title="ROS 2 - The Robotic Nervous System" class="linkLabel_WmDU">ROS 2 - The Robotic Nervous System</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/ros2-architecture"><span title="ROS 2 Architecture: The Blueprint of a Robotic Mind üèóÔ∏èüåê" class="linkLabel_WmDU">ROS 2 Architecture: The Blueprint of a Robotic Mind üèóÔ∏èüåê</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/nodes-and-topics"><span title="Nodes and Topics - The ROS 2 Communication Foundation" class="linkLabel_WmDU">Nodes and Topics - The ROS 2 Communication Foundation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/services-and-actions"><span title="‚ö° Services and Actions - Synchronous Communication in ROS 2" class="linkLabel_WmDU">‚ö° Services and Actions - Synchronous Communication in ROS 2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/urdf-robot-description"><span title="ü§ñ URDF Robot Description - Defining Your Robot&#x27;s Physical Structure" class="linkLabel_WmDU">ü§ñ URDF Robot Description - Defining Your Robot&#x27;s Physical Structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/rclpy-python-integration"><span title="üêç RCLPy Python Integration - Mastering ROS 2 with Python" class="linkLabel_WmDU">üêç RCLPy Python Integration - Mastering ROS 2 with Python</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/launch-files"><span title="üöÄ Launch Files - Orchestrating Your ROS 2 System" class="linkLabel_WmDU">üöÄ Launch Files - Orchestrating Your ROS 2 System</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/project-ros2-package"><span title="Complete ROS 2 Package Project - Building Your First Robot Application" class="linkLabel_WmDU">Complete ROS 2 Package Project - Building Your First Robot Application</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-2/introduction"><span title="üéÆ Module 2: Gazebo &amp; Unity" class="categoryLinkLabel_W154">üéÆ Module 2: Gazebo &amp; Unity</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-3/introduction"><span title="üß† Module 3: NVIDIA Isaac" class="categoryLinkLabel_W154">üß† Module 3: NVIDIA Isaac</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-4/introduction"><span title="üó£Ô∏è Module 4: VLA" class="categoryLinkLabel_W154">üó£Ô∏è Module 4: VLA</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/humanoid/kinematics-dynamics"><span title="ü¶æ Humanoid Development" class="categoryLinkLabel_W154">ü¶æ Humanoid Development</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/capstone/project-overview"><span title="üéØ Capstone Project" class="categoryLinkLabel_W154">üéØ Capstone Project</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/appendix/glossary"><span title="üìñ Appendices" class="categoryLinkLabel_W154">üìñ Appendices</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ü§ñ Module 1: ROS 2</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ROS 2 Architecture: The Blueprint of a Robotic Mind üèóÔ∏èüåê</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ROS 2 Architecture: The Blueprint of a Robotic Mind üèóÔ∏èüåê</h1></header>
<p>Welcome to the heart of ROS 2 ‚Äì its architecture! In the <a class="" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/introduction.md">introduction to ROS 2</a>, we established that ROS 2 is more than just an operating system; it&#x27;s a meta-operating system providing the nervous system for intelligent robots. Now, we&#x27;ll peel back the layers to understand the fundamental design principles and core components that enable this robust communication and coordination.</p>
<p>This chapter will provide you with a deep dive into the architectural blueprint of ROS 2, emphasizing its modularity, distributed nature, and real-time capabilities. We&#x27;ll explore the critical role of the Data Distribution Service (DDS) as its middleware and unravel the concept of Quality of Service (QoS) policies that empower developers to tailor communication for diverse robotic applications. By the end, you&#x27;ll not only understand <em>what</em> ROS 2 components are but also <em>how</em> they intricately work together to bring Physical AI to life.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-learning-objectives">üéØ Learning Objectives<a href="#-learning-objectives" class="hash-link" aria-label="Direct link to üéØ Learning Objectives" title="Direct link to üéØ Learning Objectives" translate="no">‚Äã</a></h2>
<p>By the end of this chapter, you will be able to:</p>
<ul>
<li class=""><strong>Illustrate</strong> the high-level architecture of a ROS 2 system, identifying key layers and components.</li>
<li class=""><strong>Explain</strong> the function and importance of the Data Distribution Service (DDS) as ROS 2&#x27;s middleware.</li>
<li class=""><strong>Differentiate</strong> between various DDS implementations and their roles in a ROS 2 environment.</li>
<li class=""><strong>Articulate</strong> the concept of Quality of Service (QoS) policies and their significance in robotic communication.</li>
<li class=""><strong>Apply</strong> different QoS profiles (e.g., durability, reliability, history) to specific communication scenarios.</li>
<li class=""><strong>Understand</strong> the benefits of ROS 2&#x27;s distributed and decentralized design for scalability and fault tolerance.</li>
<li class=""><strong>Recognize</strong> how ROS 2&#x27;s architectural choices support real-time performance and security in Physical AI applications.</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-ros-2-layer-cake-a-high-level-overview--layers">The ROS 2 Layer Cake: A High-Level Overview üéÇ layers<a href="#the-ros-2-layer-cake-a-high-level-overview--layers" class="hash-link" aria-label="Direct link to The ROS 2 Layer Cake: A High-Level Overview üéÇ layers" title="Direct link to The ROS 2 Layer Cake: A High-Level Overview üéÇ layers" translate="no">‚Äã</a></h2>
<p>Before diving into the specifics, let&#x27;s visualize the ROS 2 architecture as a layered cake, where each layer provides specific functionalities built upon the one below it.</p>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">graph TD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A[User Application Layer: Nodes, Executables] --&gt; B[ROS 2 Client Libraries: rclpy (Python), rclcpp (C++)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    B --&gt; C[ROS 2 Middleware Interface (RMW)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C --&gt; D[DDS Implementations: Fast DDS, Cyclone DDS, etc.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    D --&gt; E[Operating System Layer: Linux (Ubuntu 22.04 LTS)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E --&gt; F[Hardware Layer: CPU, GPU, Sensors, Actuators]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style A fill:#f9f,stroke:#333,stroke-width:2px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style B fill:#bbf,stroke:#333,stroke-width:2px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style C fill:#bfb,stroke:#333,stroke-width:2px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style D fill:#fb9,stroke:#333,stroke-width:2px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style E fill:#9bf,stroke:#333,stroke-width:2px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style F fill:#fbb,stroke:#333,stroke-width:2px;</span><br></span></code></pre></div></div>
<ol>
<li class=""><strong>Hardware Layer:</strong> The physical components of your robot ‚Äì sensors (cameras, LiDAR, IMUs), actuators (motors, grippers), and the computing platform (CPU, GPU).</li>
<li class=""><strong>Operating System Layer:</strong> Ubuntu 22.04 LTS provides the kernel and fundamental services upon which ROS 2 runs.</li>
<li class=""><strong>DDS Implementations:</strong> This is the heart of ROS 2&#x27;s communication. It&#x27;s where the actual data transfer happens, providing real-time, reliable, and secure communication.</li>
<li class=""><strong>ROS 2 Middleware Interface (RMW):</strong> An abstraction layer that allows ROS 2 to be agnostic to the underlying DDS implementation. This means you can swap out DDS providers without changing your ROS 2 application code.</li>
<li class=""><strong>ROS 2 Client Libraries (RCL):</strong> These are the programming language-specific interfaces for interacting with ROS 2. We&#x27;ll primarily use <code>rclpy</code> for Python, but <code>rclcpp</code> exists for C++. These libraries expose the ROS 2 API (nodes, topics, services, actions) to your application.</li>
<li class=""><strong>User Application Layer:</strong> This is where your custom robot logic resides, organized into <strong>nodes</strong> that perform specific tasks.</li>
</ol>
<p>This modular design offers immense flexibility. For instance, <code>rclpy</code> provides a Pythonic way to create ROS 2 nodes, which then communicate through <code>RMW</code>, leveraging the power of <code>DDS</code> to send data across your <code>Ubuntu</code> system to other nodes, potentially controlling <code>hardware</code>.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-distribution-service-dds-the-real-time-communication-backbone-">Data Distribution Service (DDS): The Real-time Communication Backbone üåêüöÄ<a href="#data-distribution-service-dds-the-real-time-communication-backbone-" class="hash-link" aria-label="Direct link to Data Distribution Service (DDS): The Real-time Communication Backbone üåêüöÄ" title="Direct link to Data Distribution Service (DDS): The Real-time Communication Backbone üåêüöÄ" translate="no">‚Äã</a></h2>
<p>The single most significant architectural change from ROS 1 to ROS 2 is the adoption of <strong>DDS (Data Distribution Service)</strong> as its primary communication middleware. DDS is an open international standard (IEEE ISO/IEC 17945:2015) designed for real-time systems that require high-performance, scalable, and reliable data exchange.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-dds-provides">What DDS Provides:<a href="#what-dds-provides" class="hash-link" aria-label="Direct link to What DDS Provides:" title="Direct link to What DDS Provides:" translate="no">‚Äã</a></h3>
<ul>
<li class=""><strong>Decentralized Architecture:</strong> Unlike ROS 1&#x27;s master-slave architecture, DDS is completely decentralized. Nodes discover each other dynamically without a central server. This enhances robustness, scalability, and eliminates single points of failure.</li>
<li class=""><strong>Data-Centric Publish/Subscribe:</strong> DDS operates on a data-centric model. Publishers declare the <em>type</em> of data they produce, and subscribers declare the <em>type</em> of data they want to receive. DDS handles the matching and delivery.</li>
<li class=""><strong>Quality of Service (QoS) Policies:</strong> This is a killer feature of DDS. It allows developers to fine-tune communication parameters like reliability, durability, and latency to match the specific needs of different data streams. We&#x27;ll delve into QoS shortly.</li>
<li class=""><strong>Direct Communication:</strong> Once nodes discover each other, they often communicate directly (peer-to-peer), minimizing latency.</li>
<li class=""><strong>Built-in Security:</strong> DDS includes security features for authentication, encryption, and access control, crucial for deploying robots in sensitive or commercial environments.</li>
<li class=""><strong>Interoperability:</strong> Being a standard, DDS enables interoperability between different vendors&#x27; DDS implementations and even non-ROS DDS applications.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="dds-implementations-in-ros-2">DDS Implementations in ROS 2<a href="#dds-implementations-in-ros-2" class="hash-link" aria-label="Direct link to DDS Implementations in ROS 2" title="Direct link to DDS Implementations in ROS 2" translate="no">‚Äã</a></h3>
<p>ROS 2 doesn&#x27;t tie itself to a single DDS vendor. Instead, it supports multiple DDS implementations through the RMW layer. The most commonly used ones include:</p>
<ol>
<li class=""><strong>Fast DDS (by eProsima):</strong> The default DDS implementation for ROS 2. It&#x27;s highly optimized for performance and is well-integrated with the ROS 2 ecosystem.</li>
<li class=""><strong>Cyclone DDS (by Eclipse Foundation):</strong> Another popular open-source DDS implementation known for its low latency and efficiency.</li>
<li class=""><strong>Connext DDS (by RTI):</strong> A commercial, high-performance DDS solution often used in critical applications like aerospace and defense.</li>
</ol>
<p>You can typically switch between these DDS implementations by setting the <code>RMW_IMPLEMENTATION</code> environment variable (e.g., <code>export RMW_IMPLEMENTATION=rmw_fastrtps_cpp</code>). For this course, the default <strong>Fast DDS</strong> will be sufficient.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="quality-of-service-qos-policies-tailoring-communication-for-robotics-Ô∏è">Quality of Service (QoS) Policies: Tailoring Communication for Robotics üìè‚öôÔ∏è<a href="#quality-of-service-qos-policies-tailoring-communication-for-robotics-Ô∏è" class="hash-link" aria-label="Direct link to Quality of Service (QoS) Policies: Tailoring Communication for Robotics üìè‚öôÔ∏è" title="Direct link to Quality of Service (QoS) Policies: Tailoring Communication for Robotics üìè‚öôÔ∏è" translate="no">‚Äã</a></h2>
<p>QoS policies are the superpower of DDS, allowing you to define the behavior of your communication channels. Different types of robotic data have different requirements: a continuous stream of camera images might prioritize speed over guaranteed delivery of every single frame, whereas a critical motor command <em>must</em> be reliably delivered.</p>
<p>QoS policies are applied to both <strong>publishers</strong> (data writers) and <strong>subscribers</strong> (data readers). For communication to occur, the QoS policies of the publisher and subscriber must be <strong>compatible</strong>.</p>
<p>Let&#x27;s explore some of the most important QoS policies:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-reliability-policy">1. Reliability Policy<a href="#1-reliability-policy" class="hash-link" aria-label="Direct link to 1. Reliability Policy" title="Direct link to 1. Reliability Policy" translate="no">‚Äã</a></h3>
<p>Defines whether messages are guaranteed to be delivered.</p>
<ul>
<li class=""><strong><code>BEST_EFFORT</code> (Default):</strong>
<ul>
<li class=""><strong>Description:</strong> Messages are sent without guarantee of arrival. If the network is congested or a subscriber is temporarily unavailable, messages might be dropped.</li>
<li class=""><strong>Use Case:</strong> High-frequency, non-critical data streams like sensor readings (e.g., camera frames, LiDAR scans) where losing an occasional data point is acceptable because a new one will arrive shortly. Prioritizes speed.</li>
</ul>
</li>
<li class=""><strong><code>RELIABLE</code>:</strong>
<ul>
<li class=""><strong>Description:</strong> Messages are guaranteed to be delivered to all matching subscribers, even if retransmissions are required. This adds overhead but ensures data integrity.</li>
<li class=""><strong>Use Case:</strong> Critical data like robot control commands, navigation goals, parameter updates, or configuration information where every message must be received.</li>
</ul>
</li>
</ul>
<p><strong>Compatibility:</strong></p>
<ul>
<li class=""><code>BEST_EFFORT</code> publisher can only communicate with <code>BEST_EFFORT</code> subscriber.</li>
<li class=""><code>RELIABLE</code> publisher can communicate with <code>RELIABLE</code> subscriber.</li>
<li class=""><code>RELIABLE</code> publisher can also communicate with <code>BEST_EFFORT</code> subscriber (but the subscriber will still only receive best-effort delivery).</li>
<li class=""><code>BEST_EFFORT</code> publisher <strong>cannot</strong> communicate with <code>RELIABLE</code> subscriber (subscriber expects reliability, publisher doesn&#x27;t provide it).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-durability-policy">2. Durability Policy<a href="#2-durability-policy" class="hash-link" aria-label="Direct link to 2. Durability Policy" title="Direct link to 2. Durability Policy" translate="no">‚Äã</a></h3>
<p>Defines whether messages persist for new subscribers.</p>
<ul>
<li class=""><strong><code>VOLATILE</code> (Default):</strong>
<ul>
<li class=""><strong>Description:</strong> Messages are not stored. New subscribers only receive messages published <em>after</em> they have joined the topic.</li>
<li class=""><strong>Use Case:</strong> Real-time sensor data, where old information is irrelevant.</li>
</ul>
</li>
<li class=""><strong><code>TRANSIENT_LOCAL</code>:</strong>
<ul>
<li class=""><strong>Description:</strong> The DDS middleware will store a limited history of published messages. New subscribers will receive these historical messages upon joining the topic.</li>
<li class=""><strong>Use Case:</strong> Configuration data, maps, or any static information that a late-joining node needs immediately to initialize correctly.</li>
</ul>
</li>
</ul>
<p><strong>Compatibility:</strong></p>
<ul>
<li class=""><code>VOLATILE</code> publisher can only communicate with <code>VOLATILE</code> subscriber.</li>
<li class=""><code>TRANSIENT_LOCAL</code> publisher can communicate with <code>TRANSIENT_LOCAL</code> subscriber.</li>
<li class=""><code>TRANSIENT_LOCAL</code> publisher can also communicate with <code>VOLATILE</code> subscriber.</li>
<li class=""><code>VOLATILE</code> publisher <strong>cannot</strong> communicate with <code>TRANSIENT_LOCAL</code> subscriber.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-history-policy">3. History Policy<a href="#3-history-policy" class="hash-link" aria-label="Direct link to 3. History Policy" title="Direct link to 3. History Policy" translate="no">‚Äã</a></h3>
<p>Defines how many messages are kept in the publisher/subscriber queue.</p>
<ul>
<li class=""><strong><code>KEEP_LAST</code> (Default):</strong>
<ul>
<li class=""><strong>Description:</strong> Only the last N messages are stored in the queue.</li>
<li class=""><strong>Use Case:</strong> Most common. <code>N</code> is often a small number (e.g., 1, 5, 10).</li>
</ul>
</li>
<li class=""><strong><code>KEEP_ALL</code>:</strong>
<ul>
<li class=""><strong>Description:</strong> All messages are stored in the queue until successfully delivered or memory runs out. (Typically used with <code>RELIABLE</code> for guaranteed delivery of all messages).</li>
<li class=""><strong>Use Case:</strong> Niche applications where every single message is critical and must be processed.</li>
</ul>
</li>
</ul>
<p><strong>Compatibility:</strong> <code>KEEP_LAST</code> and <code>KEEP_ALL</code> are generally compatible, but the effective behavior will depend on the <code>depth</code> setting and the <code>Reliability</code> policy.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-depth-queue-size">4. Depth (Queue Size)<a href="#4-depth-queue-size" class="hash-link" aria-label="Direct link to 4. Depth (Queue Size)" title="Direct link to 4. Depth (Queue Size)" translate="no">‚Äã</a></h3>
<p>Specifies the number of messages to store when <code>History</code> is <code>KEEP_LAST</code>.</p>
<ul>
<li class=""><strong>Description:</strong> For <code>KEEP_LAST</code> history, this sets the maximum size of the queue. If new messages arrive and the queue is full, the oldest message is dropped (for publishers) or not received (for subscribers).</li>
<li class=""><strong>Use Case:</strong> Controls buffer size, directly impacting memory usage and how many &quot;past&quot; messages are available (with <code>TRANSIENT_LOCAL</code> durability).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-qos-profiles">Example QoS Profiles<a href="#example-qos-profiles" class="hash-link" aria-label="Direct link to Example QoS Profiles" title="Direct link to Example QoS Profiles" translate="no">‚Äã</a></h3>
<p>ROS 2 provides convenient default QoS profiles for common use cases:</p>
<ul>
<li class=""><strong><code>qos_profile_sensor_data</code>:</strong>
<ul>
<li class=""><code>Reliability: BEST_EFFORT</code></li>
<li class=""><code>Durability: VOLATILE</code></li>
<li class=""><code>History: KEEP_LAST</code> (<code>depth: 5</code>)</li>
<li class=""><strong>Use Case:</strong> Sensor data (cameras, LiDAR) where you want the latest data, and it&#x27;s okay to drop some if the system is overloaded.</li>
</ul>
</li>
<li class=""><strong><code>qos_profile_system_default</code>:</strong>
<ul>
<li class=""><code>Reliability: RELIABLE</code></li>
<li class=""><code>Durability: TRANSIENT_LOCAL</code></li>
<li class=""><code>History: KEEP_LAST</code> (<code>depth: 1</code>)</li>
<li class=""><strong>Use Case:</strong> Configuration parameters, map data, or other non-streaming data that needs to be reliably received by new nodes.</li>
</ul>
</li>
<li class=""><strong><code>qos_profile_parameters</code>:</strong>
<ul>
<li class=""><code>Reliability: RELIABLE</code></li>
<li class=""><code>Durability: TRANSIENT_LOCAL</code></li>
<li class=""><code>History: KEEP_LAST</code> (<code>depth: 1</code>)</li>
<li class=""><strong>Use Case:</strong> Specifically for ROS 2 parameters.</li>
</ul>
</li>
<li class=""><strong><code>qos_profile_services</code>:</strong>
<ul>
<li class=""><code>Reliability: RELIABLE</code></li>
<li class=""><code>Durability: VOLATILE</code></li>
<li class=""><code>History: KEEP_LAST</code> (<code>depth: 1</code>)</li>
<li class=""><strong>Use Case:</strong> Services (request/response), where the request and response must be reliably delivered, but old messages aren&#x27;t relevant.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="python-code-example-applying-qos-policies">Python Code Example: Applying QoS Policies<a href="#python-code-example-applying-qos-policies" class="hash-link" aria-label="Direct link to Python Code Example: Applying QoS Policies" title="Direct link to Python Code Example: Applying QoS Policies" translate="no">‚Äã</a></h3>
<p>Let&#x27;s modify our <code>talker</code> and <code>listener</code> from the introduction to use specific QoS profiles.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> rclpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> std_msgs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">msg </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">qos </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ReliabilityPolicy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DurabilityPolicy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> HistoryPolicy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TalkerQoS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;talker_qos&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Define a QoS profile for reliable, transient_local communication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># This means messages are guaranteed to be delivered and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># new subscribers will receive the last message published</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        qos_profile_reliable_transient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            reliability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ReliabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RELIABLE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            durability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DurabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TRANSIENT_LOCAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            history</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HistoryPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">KEEP_LAST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Create a publisher using the custom QoS profile</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publisher_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_publisher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;chatter_qos&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            qos_profile_reliable_transient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        timer_period </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_timer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timer_period</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timer_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;TalkerQoS node initialized with RELIABLE, TRANSIENT_LOCAL QoS.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">timer_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Hello Physical AI! </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">i</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publisher_</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;Publishing: &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot; &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ListenerQoS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;listener_qos&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Define a compatible QoS profile for the subscriber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># If the publisher is RELIABLE, TRANSIENT_LOCAL, the subscriber must be at least that.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Here, we match the publisher&#x27;s QoS exactly.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        qos_profile_reliable_transient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> QoSProfile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            reliability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ReliabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">RELIABLE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            durability</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DurabilityPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TRANSIENT_LOCAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            history</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HistoryPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">KEEP_LAST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_subscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;chatter_qos&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listener_callback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            qos_profile_reliable_transient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription  </span><span class="token comment" style="color:#999988;font-style:italic"># prevent unused variable warning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ListenerQoS node initialized with RELIABLE, TRANSIENT_LOCAL QoS.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">listener_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_logger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;I heard: &quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">msg</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">data</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot; &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rclpy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Run talker and listener in separate processes to demonstrate durability</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Start the talker first, let it publish a few messages, then start the listener.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># The listener should receive the LAST published message immediately (due to TRANSIENT_LOCAL).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># To run this example:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># In Terminal 1: python3 your_package/your_package/talker_qos.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># In Terminal 2 (after talker publishes a few): python3 your_package/your_package/listener_qos.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># For a simple concurrent run (not fully demonstrating durability of late joiners):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># talker_node = TalkerQoS()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># listener_node = ListenerQoS()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># executor = rclpy.executors.MultiThreadedExecutor()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># executor.add_node(talker_node)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># executor.add_node(listener_node)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># try:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#     executor.spin()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># finally:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#     executor.shutdown()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#     talker_node.destroy_node()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#     listener_node.destroy_node()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#     rclpy.shutdown()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;This script is designed to be run in two separate terminals.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Compile your package, then run &#x27;ros2 run &lt;your_pkg&gt; talker_qos&#x27; in one terminal,&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;and &#x27;ros2 run &lt;your_pkg&gt; listener_qos&#x27; in another terminal after a few seconds.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>This example, when run in separate terminals with the <code>listener</code> starting <em>after</em> the <code>talker</code> has published a few messages, will demonstrate <code>TRANSIENT_LOCAL</code> durability: the <code>listener</code> will immediately receive the <em>last</em> message published before it started.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="decentralization-and-scalability-in-ros-2-">Decentralization and Scalability in ROS 2 üìàüåê<a href="#decentralization-and-scalability-in-ros-2-" class="hash-link" aria-label="Direct link to Decentralization and Scalability in ROS 2 üìàüåê" title="Direct link to Decentralization and Scalability in ROS 2 üìàüåê" translate="no">‚Äã</a></h2>
<p>One of the cornerstones of ROS 2&#x27;s architecture is its decentralized nature, inherited from DDS. This design choice brings significant advantages for Physical AI systems:</p>
<ol>
<li class=""><strong>Robustness and Fault Tolerance:</strong>
<ul>
<li class="">Without a central &quot;master&quot; node, the failure of any single component (node or machine) does not bring down the entire system. Other nodes can continue operating and communicating.</li>
<li class="">This is critical for real-world robots where hardware failures or network glitches can occur.</li>
</ul>
</li>
<li class=""><strong>Scalability:</strong>
<ul>
<li class="">Adding more robots, sensors, or processing units is straightforward. New nodes simply join the DDS network and discover relevant topics/services.</li>
<li class="">This allows for seamless scaling from a single robot to multi-robot deployments, or distributing computation across various machines (e.g., edge devices, workstations, cloud servers).</li>
</ul>
</li>
<li class=""><strong>Heterogeneous Systems:</strong>
<ul>
<li class="">Nodes can be written in different programming languages (C++, Python) and run on different operating systems (Linux, Windows, macOS) or even different hardware architectures (ARM, x86) while communicating transparently via DDS.</li>
<li class="">This enables the integration of diverse AI libraries and hardware platforms, which is common in complex Physical AI systems.</li>
</ul>
</li>
<li class=""><strong>Security:</strong>
<ul>
<li class="">DDS-based security (DDS-Security) provides pluggable security protocols for authentication, encryption, and access control directly at the middleware layer. This means communication can be secured without application-level overhead, crucial for mission-critical robotics.</li>
</ul>
</li>
</ol>
<p>These architectural advantages directly translate into more reliable, adaptable, and secure Physical AI applications, making ROS 2 an ideal framework for the challenges of real-world robotics.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-key-takeaways">üí° Key Takeaways<a href="#-key-takeaways" class="hash-link" aria-label="Direct link to üí° Key Takeaways" title="Direct link to üí° Key Takeaways" translate="no">‚Äã</a></h2>
<ul>
<li class="">The <strong>ROS 2 architecture</strong> is layered, with user applications built on client libraries (<code>rclpy</code>, <code>rclcpp</code>), a middleware interface (RMW), and the <strong>Data Distribution Service (DDS)</strong> as its core communication backbone, all running on the <strong>Operating System (Ubuntu 22.04 LTS)</strong>.</li>
<li class=""><strong>DDS</strong> provides decentralized, data-centric publish/subscribe communication, enabling real-time performance, scalability, and built-in security, differentiating ROS 2 from its predecessor.</li>
<li class=""><strong>Quality of Service (QoS) policies</strong> are essential for tailoring communication behavior, allowing developers to specify <code>Reliability</code> (<code>BEST_EFFORT</code> vs. <code>RELIABLE</code>), <code>Durability</code> (<code>VOLATILE</code> vs. <code>TRANSIENT_LOCAL</code>), <code>History</code> (<code>KEEP_LAST</code> vs. <code>KEEP_ALL</code>), and <code>Depth</code> (queue size).</li>
<li class="">QoS policies of publishers and subscribers must be <strong>compatible</strong> for communication to be established.</li>
<li class="">The <strong>decentralized nature</strong> of ROS 2 (via DDS) inherently offers superior robustness, fault tolerance, and scalability for single and multi-robot systems.</li>
<li class="">ROS 2&#x27;s architecture is designed to support <strong>heterogeneous systems</strong> and provides <strong>built-in security</strong>, crucial for deploying complex Physical AI solutions in diverse environments.</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="Ô∏è-hands-on-exercise-experimenting-with-ros-2-qos-policies">üèãÔ∏è Hands-On Exercise: Experimenting with ROS 2 QoS Policies<a href="#Ô∏è-hands-on-exercise-experimenting-with-ros-2-qos-policies" class="hash-link" aria-label="Direct link to üèãÔ∏è Hands-On Exercise: Experimenting with ROS 2 QoS Policies" title="Direct link to üèãÔ∏è Hands-On Exercise: Experimenting with ROS 2 QoS Policies" translate="no">‚Äã</a></h2>
<p>This exercise will give you practical experience with different QoS policies and their impact on ROS 2 communication.</p>
<p><strong>Expected Time:</strong> 25 minutes</p>
<p><strong>Requirements:</strong></p>
<ul>
<li class="">A functional ROS 2 Humble environment (sourced).</li>
<li class="">Your <code>my_robot_talker_listener</code> package from the <a class="" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/introduction.md">introduction chapter</a> (or create a new package for this exercise).</li>
<li class="">The <code>talker_qos.py</code> and <code>listener_qos.py</code> scripts from this chapter (you&#x27;ll modify them).</li>
</ul>
<p><strong>Instructions:</strong></p>
<ol>
<li class=""><strong>Create/Copy Scripts:</strong>
<ul>
<li class="">Navigate to your ROS 2 workspace: <code>cd ~/physical_ai_ws/src/my_robot_talker_listener/my_robot_talker_listener</code></li>
<li class="">Make sure <code>talker_qos.py</code> and <code>listener_qos.py</code> (from the chapter code example) are in this directory.</li>
<li class="">Add entry points for <code>talker_qos</code> and <code>listener_qos</code> to your <code>setup.py</code> (similar to <code>talker</code> and <code>listener</code>).</li>
<li class="">Build your package from <code>~/physical_ai_ws</code>: <code>colcon build --packages-select my_robot_talker_listener</code></li>
<li class="">Source your workspace: <code>source install/setup.bash</code></li>
</ul>
</li>
<li class=""><strong>Experiment with <code>TRANSIENT_LOCAL</code> Durability:</strong>
<ul>
<li class=""><strong>Terminal 1:</strong> Run the <code>talker_qos</code> node: <code>ros2 run my_robot_talker_listener talker_qos</code></li>
<li class="">Let it publish 3-5 messages.</li>
<li class=""><strong>Terminal 2:</strong> Now, run the <code>listener_qos</code> node: <code>ros2 run my_robot_talker_listener listener_qos</code></li>
<li class=""><em>Observation:</em> What is the first message the listener receives? Does it receive messages published <em>before</em> it started? Explain why.</li>
</ul>
</li>
<li class=""><strong>Experiment with <code>BEST_EFFORT</code> Reliability:</strong>
<ul>
<li class="">Modify <code>talker_qos.py</code> and <code>listener_qos.py</code> to use <code>ReliabilityPolicy.BEST_EFFORT</code> instead of <code>RELIABLE</code> for both publisher and subscriber, keeping other QoS settings the same.</li>
<li class="">Rebuild your package: <code>colcon build --packages-select my_robot_talker_listener</code></li>
<li class="">Source your workspace: <code>source install/setup.bash</code></li>
<li class=""><strong>Terminal 1:</strong> Run <code>ros2 run my_robot_talker_listener talker_qos</code></li>
<li class=""><strong>Terminal 2:</strong> Run <code>ros2 run my_robot_talker_listener listener_qos</code></li>
<li class=""><em>Observation:</em> Is there any noticeable difference in message delivery compared to <code>RELIABLE</code>? If you introduce heavy network load (e.g., by running a large file transfer in the background), do messages get dropped? (This might be hard to observe in a stable local network).</li>
</ul>
</li>
<li class=""><strong>Experiment with Incompatible QoS:</strong>
<ul>
<li class="">Modify <code>talker_qos.py</code> to use <code>ReliabilityPolicy.BEST_EFFORT</code> (publisher).</li>
<li class="">Modify <code>listener_qos.py</code> to use <code>ReliabilityPolicy.RELIABLE</code> (subscriber).</li>
<li class="">Rebuild your package and source.</li>
<li class=""><strong>Terminal 1:</strong> Run <code>ros2 run my_robot_talker_listener talker_qos</code></li>
<li class=""><strong>Terminal 2:</strong> Run <code>ros2 run my_robot_talker_listener listener_qos</code></li>
<li class=""><em>Observation:</em> What happens? Does communication occur? You should see warnings/errors about incompatible QoS.</li>
</ul>
</li>
</ol>
<p><strong>Solution Hints:</strong></p>
<ul>
<li class="">Remember the QoS compatibility rules, especially for reliability and durability.</li>
<li class="">The <code>TRANSIENT_LOCAL</code> durability combined with <code>depth=1</code> means a late-joining subscriber receives only the most recent message.</li>
<li class="">When QoS is incompatible, ROS 2 will typically log warnings and prevent communication on that topic.</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-further-reading">üìö Further Reading<a href="#-further-reading" class="hash-link" aria-label="Direct link to üìö Further Reading" title="Direct link to üìö Further Reading" translate="no">‚Äã</a></h2>
<ul>
<li class=""><strong>ROS 2 Design: DDS as the ROS Middleware:</strong> <a href="https://design.ros2.org/articles/ros_middleware.html" target="_blank" rel="noopener noreferrer" class="">design.ros2.org/articles/ros_middleware.html</a> (Official ROS 2 design article on DDS)</li>
<li class=""><strong>Data Distribution Service (DDS) Standard:</strong> <a href="https://www.omg.org/spec/DDS" target="_blank" rel="noopener noreferrer" class="">www.omg.org/spec/DDS</a> (Official OMG standard documentation)</li>
<li class=""><strong>ROS 2 Quality of Service Policies:</strong> <a href="https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html" target="_blank" rel="noopener noreferrer" class="">docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html</a> (Official ROS 2 documentation on QoS)</li>
<li class=""><strong>eProsima Fast DDS Documentation:</strong> <a href="https://fast-dds.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer" class="">fast-dds.readthedocs.io/en/latest/</a> (Documentation for the default ROS 2 DDS implementation)</li>
<li class=""><strong>What is DDS? (Video by RTI):</strong> <a href="https://www.youtube.com/watch?v=F_Yc25g_2k8" target="_blank" rel="noopener noreferrer" class="">www.youtube.com/watch?v=F_Yc25g_2k8</a> (Good visual explanation of DDS concepts)</li>
</ul>
<hr>
<p><strong>Next Chapter:</strong> <a class="" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/nodes-and-topics.md">Nodes and Topics: The Foundation of ROS 2 Communication</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics/tree/main/docs/module-1/ros2-architecture.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ROS 2 - The Robotic Nervous System</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/nodes-and-topics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nodes and Topics - The ROS 2 Communication Foundation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-learning-objectives" class="table-of-contents__link toc-highlight">üéØ Learning Objectives</a></li><li><a href="#the-ros-2-layer-cake-a-high-level-overview--layers" class="table-of-contents__link toc-highlight">The ROS 2 Layer Cake: A High-Level Overview üéÇ layers</a></li><li><a href="#data-distribution-service-dds-the-real-time-communication-backbone-" class="table-of-contents__link toc-highlight">Data Distribution Service (DDS): The Real-time Communication Backbone üåêüöÄ</a><ul><li><a href="#what-dds-provides" class="table-of-contents__link toc-highlight">What DDS Provides:</a></li><li><a href="#dds-implementations-in-ros-2" class="table-of-contents__link toc-highlight">DDS Implementations in ROS 2</a></li></ul></li><li><a href="#quality-of-service-qos-policies-tailoring-communication-for-robotics-Ô∏è" class="table-of-contents__link toc-highlight">Quality of Service (QoS) Policies: Tailoring Communication for Robotics üìè‚öôÔ∏è</a><ul><li><a href="#1-reliability-policy" class="table-of-contents__link toc-highlight">1. Reliability Policy</a></li><li><a href="#2-durability-policy" class="table-of-contents__link toc-highlight">2. Durability Policy</a></li><li><a href="#3-history-policy" class="table-of-contents__link toc-highlight">3. History Policy</a></li><li><a href="#4-depth-queue-size" class="table-of-contents__link toc-highlight">4. Depth (Queue Size)</a></li><li><a href="#example-qos-profiles" class="table-of-contents__link toc-highlight">Example QoS Profiles</a></li><li><a href="#python-code-example-applying-qos-policies" class="table-of-contents__link toc-highlight">Python Code Example: Applying QoS Policies</a></li></ul></li><li><a href="#decentralization-and-scalability-in-ros-2-" class="table-of-contents__link toc-highlight">Decentralization and Scalability in ROS 2 üìàüåê</a></li><li><a href="#-key-takeaways" class="table-of-contents__link toc-highlight">üí° Key Takeaways</a></li><li><a href="#Ô∏è-hands-on-exercise-experimenting-with-ros-2-qos-policies" class="table-of-contents__link toc-highlight">üèãÔ∏è Hands-On Exercise: Experimenting with ROS 2 QoS Policies</a></li><li><a href="#-further-reading" class="table-of-contents__link toc-highlight">üìö Further Reading</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Modules</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-1/introduction">ROS 2 Fundamentals</a></li><li class="footer__item"><a class="footer__link-item" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-2/introduction">Gazebo &amp; Unity</a></li><li class="footer__item"><a class="footer__link-item" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-3/introduction">NVIDIA Isaac</a></li><li class="footer__item"><a class="footer__link-item" href="/https://github.com/Muhammad-Nawaz453/Physical-AI---Humanoid-Robotics-BOOK/module-4/introduction">Vision-Language-Action</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://panaversity.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Panaversity<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://docs.ros.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">ROS 2 Docs<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://developer.nvidia.com/isaac" target="_blank" rel="noopener noreferrer" class="footer__link-item">NVIDIA Isaac<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 Physical AI Textbook. Built for Panaversity Hackathon.</div></div></div></footer><button style="position:fixed;bottom:24px;right:24px;background-color:#2563eb;color:white;padding:16px;border-radius:9999px;box-shadow:0 10px 15px rgba(0,0,0,0.3);border:none;cursor:pointer;z-index:50;transition:all 0.3s;display:flex;align-items:center;justify-content:center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-square" aria-hidden="true"><path d="M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"></path></svg></button></div>
</body>
</html>