"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[7741],{6975:(e,o,t)=>{t.r(o),t.d(o,{default:()=>l});var n=t(6540),r=t(1656),s=t(6025),i=t(4769),a=t(4848);function l(){const[e,o]=(0,n.useState)(""),[t,l]=(0,n.useState)(""),[d,c]=(0,n.useState)(!1),[g,u]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),h=(0,s.Ay)("/signup"),b=(0,s.Ay)("/");(0,n.useEffect)(()=>{localStorage.getItem("session_token")&&(console.log("Already logged in, redirecting..."),window.location.href=b)},[b]);const y=async()=>{if(u(""),p(""),e&&t){c(!0),p("Sending login request..."),console.log("Login attempt:",{email:e});try{const o=await fetch(`${i.Ay}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});console.log("Response status:",o.status),p(`Response: ${o.status}`);const n=await o.json();if(console.log("Response data:",n),o.ok){if(!n.session_token)return u("Login succeeded but no session token received!"),void console.error("Missing session_token in response:",n);localStorage.setItem("session_token",n.session_token),localStorage.setItem("user",JSON.stringify(n.user)),console.log("Login successful! Session stored."),console.log("Session token:",n.session_token.substring(0,10)+"..."),p("Login successful! Redirecting..."),setTimeout(()=>{window.location.href=b},500)}else{const e=n.detail||"Invalid email or password";u(e),console.error("Login failed:",e),e.includes("Invalid credentials")&&u("Invalid email or password. Please check and try again.")}}catch(g){console.error("Login error:",g),u(`Connection error: ${g.message}. Make sure the backend is running on port 8000!`),p(`Error: ${g.message}`)}finally{c(!1)}}else u("Please fill in all fields")},f=e=>{"Enter"!==e.key||d||y()};return(0,a.jsx)(r.A,{title:"Login",children:(0,a.jsx)("div",{style:{minHeight:"80vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",padding:"2.5rem",width:"100%",maxWidth:"420px"},children:[(0,a.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"bold",color:"#333",marginBottom:"0.5rem",textAlign:"center"},children:"\ud83e\udd16 Welcome Back"}),(0,a.jsx)("p",{style:{textAlign:"center",color:"#666",marginBottom:"2rem"},children:"Login to continue your Physical AI journey"}),g&&(0,a.jsxs)("div",{style:{backgroundColor:"#fee",border:"1px solid #fcc",color:"#c33",padding:"0.75rem",borderRadius:"8px",marginBottom:"1rem",fontSize:"0.9rem"},children:["\u26a0\ufe0f ",g]}),m&&(0,a.jsxs)("div",{style:{backgroundColor:"#e3f2fd",border:"1px solid #90caf9",color:"#1565c0",padding:"0.5rem",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.8rem"},children:["\ud83d\udd0d ",m]}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},children:"Email"}),(0,a.jsx)("input",{type:"email",placeholder:"john@example.com",value:e,onChange:e=>o(e.target.value),onKeyPress:f,disabled:d,autoComplete:"email",style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border 0.3s"},onFocus:e=>e.target.style.borderColor="#667eea",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},children:"Password"}),(0,a.jsx)("input",{type:"password",placeholder:"Enter your password",value:t,onChange:e=>l(e.target.value),onKeyPress:f,disabled:d,autoComplete:"current-password",style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"1rem",outline:"none",transition:"border 0.3s"},onFocus:e=>e.target.style.borderColor="#667eea",onBlur:e=>e.target.style.borderColor="#e0e0e0"})]}),(0,a.jsx)("button",{onClick:y,disabled:d,style:{width:"100%",padding:"0.75rem",backgroundColor:d?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:d?"not-allowed":"pointer",transition:"background 0.3s"},onMouseOver:e=>!d&&(e.target.style.backgroundColor="#5568d3"),onMouseOut:e=>!d&&(e.target.style.backgroundColor="#667eea"),children:d?"\u23f3 Logging in...":"Login \u2192"}),(0,a.jsxs)("p",{style:{marginTop:"1.5rem",textAlign:"center",color:"#666"},children:["Don't have an account?"," ",(0,a.jsx)("a",{href:h,style:{color:"#667eea",fontWeight:"600",textDecoration:"none"},children:"Sign up"})]}),(0,a.jsx)("button",{onClick:async()=>{try{const e=await fetch(`${i.Ay}/health`),o=await e.json();alert(`Backend Status: ${o.status}\nDocuments: ${o.documents}\nDatabase: ${o.database_configured?"\u2705":"\u274c"}`)}catch(g){alert(`Cannot reach backend! Error: ${g.message}`)}},style:{marginTop:"1rem",width:"100%",padding:"0.5rem",backgroundColor:"#f0f0f0",color:"#666",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.85rem",cursor:"pointer"},children:"\ud83d\udd0d Test Backend Connection"})]})})})}}}]);